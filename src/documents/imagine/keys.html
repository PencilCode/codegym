---
title: Picking Up a Key
subtitle: remember a key with a variable
mission: Find the key and use it to open the door.
layout: code
codeLevel: 2
codeOrder: 3
thumb: 'key'
tags: ['imagine','index']
refs: ['do', 'function', 'menu', 'variables', 'true', 'false', 'boolean', 'comments']
instructions:
  - title: Pick things up!
    mission: >
      When your player does something that you want to keep
      track of (like finding an important key) you can use a
      variable to make sure you remember that that happened.
      What other important items might your player find?
  - title: Remember other information
    mission: >
      true and false are special values, called booleans.
      Variables can store other things, though -- for example,
      numbers! Maybe you have to ask the troll three times
      before she'll let you cross the bridge...
  - title: Write yourself a note
    mission: >
      In the sample code, some lines begin with <code>#</code>.
      (This symbol has lots of names -- it's called sharp, hash, or
      pound, but it's always typed with shift-3.)
      The computer ignores all lines that begin with <code>#</code>;
      they're comments so that <i>you</i> can remember what the code does.
      Try commenting out a line of code...
code: |
  # This is a variable
  found_the_key = false

  tree = ->
    do cs
    write """
      After a long walk in the forest,
      you find yourself under an old,
      mossy oak tree.  The sunlight
      glimmers against something hidden
      in its gnarled roots...
    """
    menu
      "Keep walking to the castle": castle
      "Look closer at the roots": roots

  roots = ->
    do cs
    write """
      You dig among the roots with your
      fingers and find an old key.
      It's dirty and rusty, but it
      looks like it would still work.
    """
    write """
      <img src="/img/ancient-key">
    """
    # Remember that we found the key!
    found_the_key = true
    menu
      "Go to the castle": castle

  castle = ->
    do cs
    write """
      You walk to the castle and go
      inside to look at the treasury
      door.
    """
    # If you found the key, then you get
    # this choice.
    if found_the_key
      menu
        "Unlock the door": treasure
    # If you haven't found it yet...
    if not found_the_key
      write """
        If only you had the key, you
        might be able to save the kingdom.
      """
      menu "Go for a walk": tree

  treasure = ->
    write """
      The key fits! You open the door,
      and among the treasure you see a
      Crown...
    """

  # Start the game
  do tree
---
